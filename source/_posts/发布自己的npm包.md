---
title: å‘å¸ƒè‡ªå·±çš„npmåŒ…
top: false
cover: false
toc: true
mathjax: true
tags: ['npm']
categories: ['js']
date: 2023-8-14 17:37:53
password:
summary: å¦‚ä½•å‘å¸ƒè‡ªå·±çš„npmåŒ…
coverImg:
img:
---


# å‘å¸ƒå±äºè‡ªå·±çš„npmåŒ…

## 1. åˆ›å»ºnpmè´¦å·
æƒ³è¦å‘å¸ƒnpmåŒ…ï¼Œé¦–å…ˆè‚¯å®šè¦æœ‰è‡ªå·±çš„npmè´¦å·ï¼Œ[npmå®˜ç½‘]( https://www.npmjs.com/)ï¼Œæ³¨å†Œè¿‡ç¨‹ä¸å¤šèµ˜è¿°ï¼Œè‡ªå·±å»æ³¨å†Œå³å¯

## 2. åˆ›å»ºé¡¹ç›®
 æ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼ˆé»˜è®¤äº†ä½ å·²ç»å®‰è£…çš„nodeï¼‰ï¼Œåå­—è‡ªå·±å¯ä»¥éšä¾¿å®šä¹‰ï¼Œæˆ‘è¿™é‡Œä»¥`my-npm-package`ä¸ºä¾‹ï¼Œè¿›å…¥é¡¹ç›®å¼€å§‹æ“ä½œ
> npm init

æç¤ºè¾“å…¥npmåŒ…çš„åå­—ï¼Œä»¥åŠæè¿°ï¼Œä½œè€…ç­‰ä¿¡æ¯ï¼ŒæŒ‰ç…§æç¤ºè¾“å…¥ï¼Œï¼Œæœ€åè¾“å…¥yå³å¯ï¼Œä¹Ÿå¯ä»¥ä¸€ç›´å›è½¦ç©ºç€å…ˆåˆå§‹åŒ–å®Œæˆä¹‹ååœ¨å¡«å†™ï¼Œæˆ‘è¿™é‡Œå»ºè®®ä¸€ç›´å›è½¦åé¢åœ¨ä¿®æ”¹æ›´æ”¹ç›´è§‚åˆ°æ­¤åˆå§‹åŒ–å®Œæˆï¼Œç„¶åçœ‹æ–‡ä»¶å¤¹ä¸­ç”Ÿæˆäº†ä¸€ä¸ªpackage.jsonæ–‡ä»¶ï¼Œè¿™ä¸ªé‡Œé¢ä¿å­˜äº†åŒ…çš„å„ç§é…ç½®ä¿¡æ¯ã€‚

> çœ‹ä¸€ä¸‹package.jsonæ–‡ä»¶
```json
	{
		"name": "zhj.js",	// åŒ…çš„åå­—
		"version": "1.0.1",	// åŒ…çš„ç‰ˆæœ¬å·
		"description": "zhjçš„ä¸ªäººå…¬ç”¨js",	// åŒ…çš„æè¿°
		"main": "index.js",	//ä¸»å…¥å£æ–‡ä»¶ï¼Œé»˜è®¤å€¼æ˜¯æ¨¡å—æ ¹ç›®å½•ä¸‹é¢çš„ index.js
		"repository": {	// å­˜å‚¨ä»“åº“ç±»å‹
			"type": "git",
			"url": "git+https://github.com/Chulushan/zhj.js"
		},
		"keywords": [	// åœ¨npmç¤¾åŒºçš„æœç´¢å…³é”®å­—
			"zhj"
		],
		"author": "zhj",	// ä½œè€…
		"license": "ISC",	//ä½¿ç”¨ISCä½œä¸ºè®¸å¯è¯
		"bugs": {
			"url": "https://github.com/Chulushan/zhj.js/issues"	// æissuesåœ°å€
		},
		"homepage": "https://github.com/Chulushan/zhj.js"	// åŒ…ä¸»é¡µ
	}
```

> æ–°å»ºå…¥å£æ–‡ä»¶index.jsä»¥åŠreadme.mdæ–‡ä»¶

è¿™é‡Œæ ¹æ®è‡ªå·±çš„éœ€è¦ç¼–å†™è‡ªå·±çš„åŒ…å†…å®¹ï¼Œä»¥åŠmdè¯´æ˜ï¼Œè¿™é‡Œæˆ‘ç¨å¾®å±•ç¤ºä¸€ä¸‹è‡ªå·±çš„åŒ…å†…å®¹ï¼Œæˆ‘çš„åŒ…å¯¼å‡ºäº†å„ç§æˆ‘è‡ªå·±å¸¸ç”¨çš„æ–¹æ³•
```javascript
	/**
	* æ•°ç»„æˆ–æ•°ç»„å¯¹è±¡å»é‡
	* @param {array} val1 éœ€è¦å»é‡çš„æ•°ç»„
	* @param {string} val2 å”¯ä¸€æ ‡è¯†å­—æ®µ
	* @returns {array} è¿”å›å»é‡ä¹‹åçš„æ•°ç»„
	*/
	export function distinctArr(val1, val2) {...}
```
<font color="#42b983">PSï¼šè¿™é‡Œæ–¹æ³•æœ€å¥½ä½¿ç”¨è¿™ç§å†™æ³•ï¼Œè¿™æ ·åœ¨å¼•å…¥çš„æ—¶å€™ï¼Œç”¨æˆ·å°†é¼ æ ‡æ”¾åˆ°æ–¹æ³•åä¸Šï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„çŸ¥é“è¿™ä¸ªæ–¹æ³•æ˜¯åšä»€ä¹ˆç”¨çš„ï¼Œä»¥åŠå‚æ•°æ˜¯ä»€ä¹ˆï¼Œè¿”å›å€¼æ˜¯ä»€ä¹ˆã€‚ğŸ˜ğŸ˜ğŸ˜</font>

> æœ€ç»ˆæˆ‘çš„åŒ…ç›®å½•ç»“æ„æ˜¯è¿™æ ·çš„ï¼ˆä¸€ä¸ªæ–‡ä»¶å¤¹é‡Œé¢ä¸‰ä¸ªæ–‡ä»¶ï¼‰

+ my-npm-package
	- index.js ï¼ˆå…¥å£æ–‡ä»¶ï¼‰
	- readme.md ï¼ˆè¯´æ˜æ–‡ä»¶ï¼‰
	- package.json ï¼ˆåŒ…é…ç½®æ–‡ä»¶ï¼‰

> ä¸Šä¼ åˆ°git
	
åŒ…å‘å¸ƒä¹‹å‰éœ€è¦å°†å†…å®¹ä¸Šä¼ åˆ°gitä»“åº“ï¼Œå°±æ˜¯éœ€è¦ç¡®ä¿gitä¸Šé¢æœ‰ä½ é…ç½®æ–‡ä»¶é‡Œçš„ä»“åº“åœ°å€

> æ³¨æ„äº‹é¡¹

* <font color="red">åŒ…çš„å‘½åè§„åˆ™</font>
	* åŒ…åé•¿åº¦ä¸èƒ½è¶…è¿‡ 214 ä¸ªå­—ç¬¦ï¼ˆå‘½åç©ºé—´ä¹Ÿç®—åœ¨é‡Œé¢ï¼‰
	* åŒ…åå¿…é¡»æ˜¯å°å†™å­—æ¯ï¼Œä¸èƒ½åŒ…å«ç©ºæ ¼ï¼Œä¸èƒ½ä»¥.æˆ–-å¼€å¤´ï¼ˆä¸­é—´å¯ä»¥æœ‰ï¼‰
	* åŒ…åä¸èƒ½ä½¿ç”¨nodeçš„ä¿ç•™å…³é”®å­—ï¼Œå¦‚httpç­‰
	* åŒ…åä¸èƒ½ä»¥nodeçš„æ¨¡å—åå¼€å¤´ï¼Œæ¯”å¦‚fsã€path
	* åŒ…åä¸èƒ½åŒ…å«node_modules
	* åŒ…åå¦‚æœä»¥@å¼€å¤´ï¼Œé»˜è®¤ä¼šè¯†åˆ«ä¸ºç§æœ‰åŒ…ï¼Œéœ€è¦æ”¶è´¹ï¼ˆä¸€èˆ¬æ ¼å¼ä¸º@name/baomingï¼‰ï¼Œä¹Ÿå¯åœ¨å‘å¸ƒçš„æ—¶å€™ç‰¹åˆ«æ³¨æ˜æ˜¯å…¬æœ‰åŒ…ï¼Œæˆ–è€…åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ é…ç½®ï¼Œ[è¯¦æƒ…ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹](#rule)
* åŒ…çš„å…¥å£æ–‡ä»¶
	* åŒ…çš„å…¥å£æ–‡ä»¶é»˜è®¤ä¸ºæ ¹ç›®å½•ä¸‹çš„index.jsï¼Œä¹Ÿå¯è‡ªå®šä¹‰

## 3. å‘å¸ƒ

å‘å¸ƒä¹‹å‰éœ€è¦ç™»å½•è‡ªå·±çš„npmè´¦å·

> npm login

æ ¹æ®æç¤ºè‡ªå·±å¡«å†™ï¼Œè´¦å·å¯†ç é‚®ç®±å•¥çš„ï¼Œæœ‰æ—¶å€™å¯èƒ½éœ€è¦å¡«å†™éªŒè¯ç ï¼Œå»è‡ªå·±ç»‘å®šçš„é‚®ç®±æŸ¥çœ‹ï¼Œç™»å½•æˆåŠŸä¼šæç¤ºï¼š`Logged in as yourName on https://registry.npmjs.org/`ï¼Œæ­¤æ—¶å°±ç™»å½•æˆåŠŸäº†ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥å‘å¸ƒäº†ã€‚

> npm version 1.0.1

å‘å¸ƒçš„ç‰ˆæœ¬å·ï¼Œç¬¬ä¸€æ¬¡å‘å¸ƒä¸éœ€è¦è¿™ä¸ªï¼Œé»˜è®¤æ˜¯1.0.0ç‰ˆæœ¬ï¼Œä¹‹åæ¯æ¬¡æ›´æ–°æ ¹æ®ä¸‹é¢çš„è§„åˆ™ï¼Œå…ˆç¡®å®šç‰ˆæœ¬åœ¨å‘å¸ƒå°±è¡Œ
* <font color="red">åŒ…çš„ç‰ˆæœ¬å·è§„åˆ™</font>
	* ç‰ˆæœ¬å·æ ¼å¼ï¼šä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·ï¼ˆå¦‚ï¼š1.2.3è¿™ç§ï¼‰ï¼Œ<font color="red">ç‰ˆæœ¬å·åªèƒ½é€’å¢</font>
	* ç‰ˆæœ¬å·é€’å¢è§„åˆ™ï¼š
		* ä¸»ç‰ˆæœ¬å·ï¼šå½“ä½ åšäº†ä¸å…¼å®¹çš„ API ä¿®æ”¹ï¼Œä¸€èˆ¬éƒ½æ˜¯å¤§çš„ç‰ˆæœ¬è¿­ä»£æ¯”å¦‚vue2è‡³vue3è¿™ç§
		* æ¬¡ç‰ˆæœ¬å·ï¼šå½“ä½ åšäº†å‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ€§æ–°å¢ï¼Œæ–°å¢äº†ä¸€äº›åŠŸèƒ½ä¹‹ç±»çš„
		* ä¿®è®¢å·ï¼šå½“ä½ åšäº†å‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®æ­£ï¼Œæœªæ–°å¢åªæ˜¯æ”¹äº†è¿™ç§

> npm publish

å‘å¸ƒæˆåŠŸä¼šæç¤ºï¼š<u><font color="#42b983">+ my-npm-package@1.0.1</font> </u>ï¼Œæ­¤æ—¶å°±å‘å¸ƒæˆåŠŸäº†ï¼Œå»npmå®˜ç½‘æŸ¥çœ‹ï¼Œå‘ç°å·²ç»å‘å¸ƒäº†ã€‚

> <a id="rule">å‘å¸ƒæ³¨æ„äº‹é¡¹</a> 
* å‘å¸ƒä¹‹å‰è¦ç¡®ä¿é…ç½®æ–‡ä»¶ä¸­çš„gitä»“åº“æ˜¯å­˜åœ¨çš„ï¼Œå¦åˆ™ä¼šæŠ¥é”™
* è¦ç¡®ä¿æºåœ°å€ä¸ºå®˜æ–¹åœ°å€`http://registry.npmjs.org`æˆ–`https://registry.npmjs.com`ï¼Œ å¯ä»¥é€šè¿‡ npm config get registry å‘½ä»¤æŸ¥çœ‹å½“å‰ registry æºï¼Œå¦‚æœä¸æ˜¯å¯é€šè¿‡ä»¥ä¸‹å››ç§æ–¹å¼ä¿®æ”¹
	* 1ã€åœ¨å…¨å±€é…ç½® .npmrc ï¼Œå¯é€šè¿‡å‘½ä»¤ `npm config set registry=http://registry.npmjs.org/ `
	* 2ã€åœ¨å½“å‰é¡¹ç›®ä¸­æ·»åŠ é…ç½®æ–‡ä»¶.npmrcï¼Œé‡Œé¢å†…å®¹ä¸º
		```
			registry = http://registry.npmjs.org/
		```
	* 3ã€å‘å¸ƒåŒ…æ—¶æŒ‡å®š --registry é€‰é¡¹ï¼Œ`npm publish â€”registry=http://registry.npmjs.org/`
	* 4ã€åœ¨å½“å‰é¡¹ç›®çš„ package.json ä¸­é€šè¿‡ publishConfig å­—æ®µæŒ‡å®š
		```
			"publishConfig": {
				"registry": "http://registry.npmjs.org/"
			}
		```
* å¦‚æœæƒ³è¦å‘å¸ƒå¸¦æœ‰å‘½åç©ºé—´çš„åŒ…ï¼Œæœ‰ä¸¤ç§æ–¹æ³•
	* 1ã€å‘å¸ƒå‘½ä»¤npm publish --access publicï¼ŒæŒ‡å‡ºè¿™æ˜¯ä¸ªå…¬æœ‰åŒ…
	* 2ã€packageçš„pbulishConfigå­—æ®µä¸­æ·»åŠ accesså­—æ®µ
		```
			"publishConfig": {
				"access": "public"
			}
		```

## 4. æˆ‘çš„åŒ…åœ°å€

æˆ‘è‡ªå·±çš„åŒ…ï¼š<u>[ç‚¹å‡»æŸ¥çœ‹](https://www.npmjs.com/package/zhj.js?activeTab=readme)</u>

